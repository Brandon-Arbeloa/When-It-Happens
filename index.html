<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHEN IT HAPPENS - Party Planner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0A0A0A 0%, #1A0A2E 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        h1 {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #FF006E, #00F5FF, #00FF88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-card {
            background: rgba(26, 26, 26, 0.9);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #00F5FF;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        input[type="range"] {
            width: 100%;
            margin-bottom: 10px;
            -webkit-appearance: none;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #FF006E;
            border-radius: 50%;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #FF006E;
            border-radius: 50%;
            cursor: pointer;
        }

        select, textarea {
            width: 100%;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .slider-value {
            text-align: center;
            color: #FFEA00;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .theme-btn {
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .theme-btn:hover {
            background: rgba(255,0,110,0.3);
            transform: scale(1.05);
        }

        .theme-btn.selected {
            background: #FF006E;
            font-weight: bold;
        }

        .action-buttons {
            text-align: center;
            margin: 30px 0;
        }

        .btn {
            padding: 15px 30px;
            margin: 0 10px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(45deg, #FF006E, #00F5FF);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: #00FF88;
            border: 2px solid #00FF88;
        }

        .btn-danger {
            background: transparent;
            color: #FFEA00;
            border: 2px solid #FFEA00;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255,255,255,0.2);
        }

        #results {
            display: none;
            background: rgba(26, 26, 26, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        #results.show {
            display: block;
        }

        .result-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-left: 3px solid #FF006E;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .result-section:hover {
            background: rgba(255,255,255,0.08);
            transform: translateX(5px);
        }

        .result-section h3 {
            color: #00F5FF;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .expand-icon {
            font-size: 0.8rem;
            color: #888;
        }

        .detail-content {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .detail-content.show {
            display: block;
        }

        .food-item {
            background: rgba(0,255,136,0.1);
            border: 1px solid rgba(0,255,136,0.3);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .food-item h4 {
            color: #00FF88;
            margin-bottom: 5px;
        }

        .price-tag {
            color: #FFEA00;
            font-weight: bold;
        }

        .order-btn {
            background: #00FF88;
            color: #000;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .order-btn:hover {
            background: #00FF88;
            transform: scale(1.05);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #FF006E;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>WHEN IT HAPPENS</h1>
    <p class="tagline">From Solo Dance Party to Stadium Rave in 3 Clicks</p>

    <div class="container">
        <div class="input-grid">
            <div class="input-card">
                <label for="guests">Guest Count</label>
                <input type="range" id="guests" min="1" max="10000" value="50">
                <div class="slider-value" id="guests-value">50 people</div>
            </div>

            <div class="input-card">
                <label for="budget">Budget</label>
                <input type="range" id="budget" min="100" max="1000000" value="5000" step="100">
                <div class="slider-value" id="budget-value">$5,000</div>
            </div>

            <div class="input-card">
                <label for="vibe">Vibe Level</label>
                <select id="vibe">
                    <option value="chill">Chill Hangout</option>
                    <option value="casual">Casual Party</option>
                    <option value="lively" selected>Lively Celebration</option>
                    <option value="wild">Wild Night</option>
                    <option value="epic">Epic Rager</option>
                </select>
            </div>

            <div class="input-card">
                <label>Theme</label>
                <div class="theme-grid" id="theme-grid">
                    <button class="theme-btn" data-theme="neon-noir">Neon Noir</button>
                    <button class="theme-btn" data-theme="desert-mirage">Desert Mirage</button>
                    <button class="theme-btn" data-theme="garden-glam">Garden Glam</button>
                    <button class="theme-btn" data-theme="cyber-punk">Cyber Punk</button>
                    <button class="theme-btn" data-theme="vintage-vegas">Vintage Vegas</button>
                    <button class="theme-btn" data-theme="tropical-disco">Tropical Disco</button>
                    <button class="theme-btn" data-theme="patriotic">Patriotic</button>
                    <button class="theme-btn" data-theme="anti-fascist">Anti-Fascist</button>
                    <button class="theme-btn" data-theme="we-made-it">We Made It</button>
                </div>
            </div>

            <div class="input-card">
                <label for="dietary">Dietary Restrictions</label>
                <textarea id="dietary" rows="3" placeholder="Vegetarian, Vegan, Gluten-free..."></textarea>
            </div>

            <div class="input-card">
                <label for="alcohol">Alcohol Preferences</label>
                <select id="alcohol">
                    <option value="none">No Alcohol</option>
                    <option value="beer-wine">Beer & Wine Only</option>
                    <option value="standard" selected>Standard Bar</option>
                    <option value="premium">Premium Selection</option>
                    <option value="craft">Craft Cocktails</option>
                </select>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn btn-primary" onclick="generatePlan()">🎉 GENERATE PARTY PLAN</button>
            <button class="btn btn-secondary" onclick="randomizePlan()">🎲 SURPRISE ME</button>
            <button class="btn btn-danger" onclick="panicMode()">⚡ PANIC MODE</button>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Creating your perfect party...</p>
        </div>

        <div id="results">
            <h2 style="text-align: center; margin-bottom: 20px;">YOUR PARTY PLAN</h2>
            <div id="results-content"></div>
        </div>
    </div>

    <script>
        // Simple, direct JavaScript - no complicated event listeners
        let selectedTheme = 'neon-noir';

        // Update slider displays with proper comma formatting
        document.getElementById('guests').oninput = function() {
            let val = parseInt(this.value);
            let display = '';
            
            if (val == 1) {
                display = '1 person';
            } else if (val >= 1000000000) {
                display = (val/1000000000).toFixed(1) + 'B people';
            } else if (val >= 1000000) {
                display = (val/1000000).toFixed(1) + 'M people';
            } else if (val >= 1000) {
                display = (val/1000).toFixed(1) + 'K people';
            } else {
                display = val.toLocaleString() + ' people';
            }
            
            document.getElementById('guests-value').textContent = display;
        };

        document.getElementById('budget').oninput = function() {
            let val = parseInt(this.value);
            let display = '';
            
            if (val >= 1000000000) {
                display = '

        // Theme selection
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.onclick = function() {
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedTheme = this.dataset.theme;
            };
        });

        // Main generate function
        function generatePlan() {
            console.log('Generating party plan...');
            
            const guests = parseInt(document.getElementById('guests').value);
            const budget = parseInt(document.getElementById('budget').value);
            const vibe = document.getElementById('vibe').value;
            const dietary = document.getElementById('dietary').value;
            const alcohol = document.getElementById('alcohol').value;

            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('results').classList.remove('show');

            // Simulate processing
            setTimeout(() => {
                const plan = createPlan(guests, budget, vibe, dietary, alcohol);
                displayPlan(plan);
                
                document.getElementById('loading').classList.remove('show');
                document.getElementById('results').classList.add('show');
            }, 1500);
        }

        function createPlan(guests, budget, vibe, dietary, alcohol) {
            const budgetPerPerson = Math.floor(budget / guests);
            
            // Detailed food recommendations based on scale
            let foodItems = [];
            let foodSummary = '';
            
            if (guests <= 20) {
                foodSummary = 'Artisan cheese boards, charcuterie, gourmet sliders, sushi platters';
                foodItems = [
                    { name: 'Artisan Cheese Board', quantity: Math.ceil(guests/5), unitPrice: 75, description: 'Selection of 5 premium cheeses, crackers, fruits', servings: '5 people per board' },
                    { name: 'Charcuterie Platter', quantity: Math.ceil(guests/5), unitPrice: 85, description: 'Cured meats, olives, nuts, spreads', servings: '5 people per platter' },
                    { name: 'Gourmet Slider Trio', quantity: Math.ceil(guests/2), unitPrice: 24, description: 'Beef, chicken, veggie options', servings: '2 people per set' },
                    { name: 'Sushi Platter (48pc)', quantity: Math.ceil(guests/8), unitPrice: 120, description: 'California, spicy tuna, salmon rolls', servings: '8 people per platter' },
                    { name: 'Mediterranean Mezze', quantity: Math.ceil(guests/10), unitPrice: 95, description: 'Hummus, falafel, pita, tzatziki', servings: '10 people per spread' }
                ];
            } else if (guests <= 100) {
                foodSummary = 'Taco bar, pizza station, BBQ buffet, pasta bar';
                foodItems = [
                    { name: 'Taco Bar Setup', quantity: 1, unitPrice: guests * 18, description: 'Build-your-own tacos with all fixings', servings: `${guests} people` },
                    { name: 'Pizza Party Package', quantity: Math.ceil(guests/8), unitPrice: 120, description: 'Assorted pizzas - 8 large pies', servings: '8 people per package' },
                    { name: 'BBQ Buffet', quantity: 1, unitPrice: guests * 22, description: 'Brisket, pulled pork, sides', servings: `${guests} people` },
                    { name: 'Pasta Station', quantity: 1, unitPrice: guests * 16, description: '3 pasta types, 4 sauces, salad', servings: `${guests} people` },
                    { name: 'Asian Fusion Station', quantity: 1, unitPrice: guests * 20, description: 'Stir-fry, spring rolls, dumplings', servings: `${guests} people` }
                ];
            } else if (guests <= 1000) {
                foodSummary = '3 food trucks, multiple buffet stations, catering teams';
                foodItems = [
                    { name: 'Food Truck #1 - Tacos', quantity: 4, unitPrice: 2500, description: '4-hour service, unlimited tacos', servings: '250 people per hour' },
                    { name: 'Food Truck #2 - BBQ', quantity: 4, unitPrice: 3000, description: '4-hour service, full BBQ menu', servings: '250 people per hour' },
                    { name: 'Food Truck #3 - Desserts', quantity: 4, unitPrice: 2000, description: '4-hour service, ice cream & sweets', servings: '250 people per hour' },
                    { name: 'Buffet Stations (5)', quantity: 1, unitPrice: guests * 35, description: 'International cuisine stations', servings: `${guests} people` },
                    { name: 'Catering Staff Team', quantity: Math.ceil(guests/50), unitPrice: 500, description: 'Professional service staff', servings: '50 guests per staff' }
                ];
            } else {
                foodSummary = 'Festival food court with 10+ vendors, multiple catering zones';
                foodItems = [
                    { name: 'Food Vendor Package A', quantity: 5, unitPrice: 5000, description: 'Tacos, burgers, pizza, BBQ, Asian', servings: '200 people/hour each' },
                    { name: 'Food Vendor Package B', quantity: 5, unitPrice: 5000, description: 'Vegan, desserts, coffee, smoothies, ice cream', servings: '200 people/hour each' },
                    { name: 'VIP Catering Zone', quantity: 1, unitPrice: 25000, description: 'Premium buffet for VIP area', servings: '500 VIP guests' },
                    { name: 'Hydration Stations', quantity: 10, unitPrice: 500, description: 'Water, sports drinks, cooling zones', servings: '1000 people each' },
                    { name: 'Festival Staff Catering', quantity: 1, unitPrice: 10000, description: 'Feed your crew and volunteers', servings: 'All staff' }
                ];
            }

            // Calculate total food cost
            let totalFoodCost = 0;
            foodItems.forEach(item => {
                item.totalPrice = item.quantity * item.unitPrice;
                totalFoodCost += item.totalPrice;
            });

            // Music setup
            let music = '';
            if (guests <= 20) {
                music = 'Curated Spotify playlist + quality Bluetooth speaker';
            } else if (guests <= 100) {
                music = 'Professional DJ with sound system';
            } else if (guests <= 1000) {
                music = 'Live band + DJ, professional stage and lighting';
            } else {
                music = 'Multiple stages, headline acts, full festival production';
            }

            // Staffing
            const staff = {
                bartenders: Math.max(1, Math.ceil(guests / 75)),
                servers: Math.ceil(guests / 25),
                security: Math.ceil(guests / 100),
                cleanup: Math.ceil(guests / 50)
            };

            return {
                guests: guests,
                budget: budget,
                budgetPerPerson: budgetPerPerson,
                vibe: vibe,
                theme: selectedTheme,
                dietary: dietary,
                alcohol: alcohol,
                foodSummary: foodSummary,
                foodItems: foodItems,
                totalFoodCost: totalFoodCost,
                music: music,
                staff: staff
            };
        }

        function displayPlan(plan) {
            // Create food details HTML
            let foodDetailsHTML = '';
            plan.foodItems.forEach(item => {
                foodDetailsHTML += `
                    <div class="food-item">
                        <h4>${item.name}</h4>
                        <p><strong>Quantity:</strong> ${item.quantity.toLocaleString()} ${item.quantity > 1 ? 'units' : 'unit'}</p>
                        <p><strong>Description:</strong> ${item.description}</p>
                        <p><strong>Serves:</strong> ${item.servings}</p>
                        <p class="price-tag">Unit Price: ${item.unitPrice.toLocaleString()}</p>
                        <p class="price-tag">Total: ${item.totalPrice.toLocaleString()}</p>
                        <button class="order-btn" onclick="alert('One-click ordering coming soon! Partner: ${item.name}')">
                            📦 Quick Order
                        </button>
                    </div>
                `;
            });

            let html = `
                <div class="result-section" onclick="toggleSection('overview')">
                    <h3>📊 Overview <span class="expand-icon">▼</span></h3>
                    <div id="overview-details" class="detail-content show">
                        <p><strong>Guests:</strong> ${plan.guests.toLocaleString()}</p>
                        <p><strong>Budget:</strong> ${plan.budget.toLocaleString()} (${plan.budgetPerPerson.toLocaleString()}/person)</p>
                        <p><strong>Vibe:</strong> ${plan.vibe.toUpperCase()}</p>
                        <p><strong>Theme:</strong> ${plan.theme.replace('-', ' ').toUpperCase()}</p>
                    </div>
                </div>

                <div class="result-section" onclick="toggleSection('food')">
                    <h3>🍕 Food & Catering <span class="expand-icon">Click to expand</span></h3>
                    <p>${plan.foodSummary}</p>
                    <p class="price-tag">Total Food Budget: ${plan.totalFoodCost.toLocaleString()}</p>
                    ${plan.dietary ? `<p><strong>Dietary Notes:</strong> ${plan.dietary}</p>` : ''}
                    <div id="food-details" class="detail-content">
                        <h4 style="color: #00FF88; margin-bottom: 15px;">Detailed Food Order:</h4>
                        ${foodDetailsHTML}
                    </div>
                </div>

                <div class="result-section" onclick="toggleSection('drinks')">
                    <h3>🍹 Drinks <span class="expand-icon">▼</span></h3>
                    <div id="drinks-details" class="detail-content">
                        <p><strong>Bar Type:</strong> ${plan.alcohol.replace('-', ' ').toUpperCase()}</p>
                        <p><strong>Estimated Quantities:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Alcoholic Drinks: ${(plan.guests * 3).toLocaleString()} servings</li>
                            <li>Water Bottles: ${(plan.guests * 2).toLocaleString()}</li>
                            <li>Soft Drinks: ${(plan.guests * 1).toLocaleString()}</li>
                        </ul>
                    </div>
                </div>

                <div class="result-section" onclick="toggleSection('music')">
                    <h3>🎵 Music & Entertainment <span class="expand-icon">▼</span></h3>
                    <div id="music-details" class="detail-content">
                        <p>${plan.music}</p>
                    </div>
                </div>

                <div class="result-section" onclick="toggleSection('staffing')">
                    <h3>👥 Staffing Needs <span class="expand-icon">▼</span></h3>
                    <div id="staffing-details" class="detail-content">
                        <p><strong>Bartenders:</strong> ${plan.staff.bartenders.toLocaleString()}</p>
                        <p><strong>Servers:</strong> ${plan.staff.servers.toLocaleString()}</p>
                        <p><strong>Security:</strong> ${plan.staff.security.toLocaleString()}</p>
                        <p><strong>Cleanup Crew:</strong> ${plan.staff.cleanup.toLocaleString()}</p>
                        <p><strong>Total Staff:</strong> ${(plan.staff.bartenders + plan.staff.servers + plan.staff.security + plan.staff.cleanup).toLocaleString()} people</p>
                    </div>
                </div>
            `;

            document.getElementById('results-content').innerHTML = html;
        }

        function toggleSection(section) {
            event.stopPropagation();
            const details = document.getElementById(section + '-details');
            if (details) {
                details.classList.toggle('show');
                // Update expand icon
                const icon = event.currentTarget.querySelector('.expand-icon');
                if (icon) {
                    icon.textContent = details.classList.contains('show') ? '▲' : '▼';
                }
            }
        }

        function randomizePlan() {
            // Randomize all inputs
            document.getElementById('guests').value = Math.floor(Math.random() * 9999) + 1;
            document.getElementById('budget').value = Math.floor(Math.random() * 99900) + 100;
            document.getElementById('vibe').selectedIndex = Math.floor(Math.random() * 5);
            document.getElementById('alcohol').selectedIndex = Math.floor(Math.random() * 6);
            
            // Update displays
            document.getElementById('guests').oninput();
            document.getElementById('budget').oninput();
            
            // Random theme
            const themes = document.querySelectorAll('.theme-btn');
            themes.forEach(b => b.classList.remove('selected'));
            const randomTheme = themes[Math.floor(Math.random() * themes.length)];
            randomTheme.classList.add('selected');
            selectedTheme = randomTheme.dataset.theme;
            
            // Generate
            generatePlan();
        }

        function panicMode() {
            const guests = parseInt(document.getElementById('guests').value);
            
            let html = `
                <div class="result-section" style="border-color: #FF0000; background: rgba(255,0,0,0.1);">
                    <h3>🚨 PANIC MODE - 5 MINUTE PARTY PLAN!</h3>
                    <p><strong>FOOD (2 min):</strong> Order ${Math.ceil(guests/3)} pizzas NOW! Grab all chips and candy!</p>
                    <p><strong>DRINKS (1 min):</strong> Ice everything! Text everyone to BYOB!</p>
                    <p><strong>MUSIC (30 sec):</strong> Spotify "Today's Top Hits" at MAX volume!</p>
                    <p><strong>SPACE (1 min):</strong> Hide mess in closets! Push furniture to walls!</p>
                    <p><strong>VIBE (30 sec):</strong> Dim lights! Light candles! Text "PARTY NOW!"</p>
                    <p style="margin-top: 20px; font-size: 1.2rem; color: #FFEA00;"><strong>GO TIME! IT'S HAPPENING!</strong></p>
                </div>
            `;
            
            document.getElementById('results-content').innerHTML = html;
            document.getElementById('results').classList.add('show');
        }

        // Test on load
        console.log('When It Happens loaded successfully!');
        console.log('Try clicking Generate Party Plan button');
    </script>
</body>
</html> + (val/1000000000).toFixed(1) + 'B';
            } else if (val >= 1000000) {
                display = '

        // Theme selection
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.onclick = function() {
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedTheme = this.dataset.theme;
            };
        });

        // Main generate function
        function generatePlan() {
            console.log('Generating party plan...');
            
            const guests = parseInt(document.getElementById('guests').value);
            const budget = parseInt(document.getElementById('budget').value);
            const vibe = document.getElementById('vibe').value;
            const dietary = document.getElementById('dietary').value;
            const alcohol = document.getElementById('alcohol').value;

            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('results').classList.remove('show');

            // Simulate processing
            setTimeout(() => {
                const plan = createPlan(guests, budget, vibe, dietary, alcohol);
                displayPlan(plan);
                
                document.getElementById('loading').classList.remove('show');
                document.getElementById('results').classList.add('show');
            }, 1500);
        }

        function createPlan(guests, budget, vibe, dietary, alcohol) {
            const budgetPerPerson = Math.floor(budget / guests);
            
            // Food recommendations based on scale
            let food = '';
            if (guests <= 20) {
                food = 'Artisan cheese boards, charcuterie, gourmet sliders, sushi platters';
            } else if (guests <= 100) {
                food = 'Taco bar, pizza station, BBQ buffet, pasta bar';
            } else if (guests <= 1000) {
                food = '3 food trucks, multiple buffet stations, catering teams';
            } else {
                food = 'Festival food court with 10+ vendors, multiple catering zones';
            }

            // Music setup
            let music = '';
            if (guests <= 20) {
                music = 'Curated Spotify playlist + quality Bluetooth speaker';
            } else if (guests <= 100) {
                music = 'Professional DJ with sound system';
            } else if (guests <= 1000) {
                music = 'Live band + DJ, professional stage and lighting';
            } else {
                music = 'Multiple stages, headline acts, full festival production';
            }

            // Staffing
            const staff = {
                bartenders: Math.max(1, Math.ceil(guests / 75)),
                servers: Math.ceil(guests / 25),
                security: Math.ceil(guests / 100),
                cleanup: Math.ceil(guests / 50)
            };

            return {
                guests: guests,
                budget: budget,
                budgetPerPerson: budgetPerPerson,
                vibe: vibe,
                theme: selectedTheme,
                dietary: dietary,
                alcohol: alcohol,
                food: food,
                music: music,
                staff: staff
            };
        }

        function displayPlan(plan) {
            let html = `
                <div class="result-section">
                    <h3>📊 Overview</h3>
                    <p><strong>Guests:</strong> ${plan.guests.toLocaleString()}</p>
                    <p><strong>Budget:</strong> $${plan.budget.toLocaleString()} ($${plan.budgetPerPerson}/person)</p>
                    <p><strong>Vibe:</strong> ${plan.vibe.toUpperCase()}</p>
                    <p><strong>Theme:</strong> ${plan.theme.replace('-', ' ').toUpperCase()}</p>
                </div>

                <div class="result-section">
                    <h3>🍕 Food & Catering</h3>
                    <p>${plan.food}</p>
                    ${plan.dietary ? `<p><strong>Dietary Notes:</strong> ${plan.dietary}</p>` : ''}
                </div>

                <div class="result-section">
                    <h3>🍹 Drinks</h3>
                    <p><strong>Bar Type:</strong> ${plan.alcohol.replace('-', ' ').toUpperCase()}</p>
                    <p><strong>Estimated Quantities:</strong> ${Math.ceil(plan.guests * 3)} drinks, ${plan.guests * 2} waters</p>
                </div>

                <div class="result-section">
                    <h3>🎵 Music & Entertainment</h3>
                    <p>${plan.music}</p>
                </div>

                <div class="result-section">
                    <h3>👥 Staffing Needs</h3>
                    <p><strong>Bartenders:</strong> ${plan.staff.bartenders}</p>
                    <p><strong>Servers:</strong> ${plan.staff.servers}</p>
                    <p><strong>Security:</strong> ${plan.staff.security}</p>
                    <p><strong>Cleanup Crew:</strong> ${plan.staff.cleanup}</p>
                </div>
            `;

            document.getElementById('results-content').innerHTML = html;
        }

        function randomizePlan() {
            // Randomize all inputs
            document.getElementById('guests').value = Math.floor(Math.random() * 9999) + 1;
            document.getElementById('budget').value = Math.floor(Math.random() * 99900) + 100;
            document.getElementById('vibe').selectedIndex = Math.floor(Math.random() * 5);
            document.getElementById('alcohol').selectedIndex = Math.floor(Math.random() * 6);
            
            // Update displays
            document.getElementById('guests').oninput();
            document.getElementById('budget').oninput();
            
            // Random theme
            const themes = document.querySelectorAll('.theme-btn');
            themes.forEach(b => b.classList.remove('selected'));
            const randomTheme = themes[Math.floor(Math.random() * themes.length)];
            randomTheme.classList.add('selected');
            selectedTheme = randomTheme.dataset.theme;
            
            // Generate
            generatePlan();
        }

        function panicMode() {
            const guests = parseInt(document.getElementById('guests').value);
            
            let html = `
                <div class="result-section" style="border-color: #FF0000; background: rgba(255,0,0,0.1);">
                    <h3>🚨 PANIC MODE - 5 MINUTE PARTY PLAN!</h3>
                    <p><strong>FOOD (2 min):</strong> Order ${Math.ceil(guests/3)} pizzas NOW! Grab all chips and candy!</p>
                    <p><strong>DRINKS (1 min):</strong> Ice everything! Text everyone to BYOB!</p>
                    <p><strong>MUSIC (30 sec):</strong> Spotify "Today's Top Hits" at MAX volume!</p>
                    <p><strong>SPACE (1 min):</strong> Hide mess in closets! Push furniture to walls!</p>
                    <p><strong>VIBE (30 sec):</strong> Dim lights! Light candles! Text "PARTY NOW!"</p>
                    <p style="margin-top: 20px; font-size: 1.2rem; color: #FFEA00;"><strong>GO TIME! IT'S HAPPENING!</strong></p>
                </div>
            `;
            
            document.getElementById('results-content').innerHTML = html;
            document.getElementById('results').classList.add('show');
        }

        // Test on load
        console.log('When It Happens loaded successfully!');
        console.log('Try clicking Generate Party Plan button');
    </script>
</body>
</html> + (val/1000000).toFixed(1) + 'M';
            } else {
                display = '

        // Theme selection
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.onclick = function() {
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedTheme = this.dataset.theme;
            };
        });

        // Main generate function
        function generatePlan() {
            console.log('Generating party plan...');
            
            const guests = parseInt(document.getElementById('guests').value);
            const budget = parseInt(document.getElementById('budget').value);
            const vibe = document.getElementById('vibe').value;
            const dietary = document.getElementById('dietary').value;
            const alcohol = document.getElementById('alcohol').value;

            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('results').classList.remove('show');

            // Simulate processing
            setTimeout(() => {
                const plan = createPlan(guests, budget, vibe, dietary, alcohol);
                displayPlan(plan);
                
                document.getElementById('loading').classList.remove('show');
                document.getElementById('results').classList.add('show');
            }, 1500);
        }

        function createPlan(guests, budget, vibe, dietary, alcohol) {
            const budgetPerPerson = Math.floor(budget / guests);
            
            // Food recommendations based on scale
            let food = '';
            if (guests <= 20) {
                food = 'Artisan cheese boards, charcuterie, gourmet sliders, sushi platters';
            } else if (guests <= 100) {
                food = 'Taco bar, pizza station, BBQ buffet, pasta bar';
            } else if (guests <= 1000) {
                food = '3 food trucks, multiple buffet stations, catering teams';
            } else {
                food = 'Festival food court with 10+ vendors, multiple catering zones';
            }

            // Music setup
            let music = '';
            if (guests <= 20) {
                music = 'Curated Spotify playlist + quality Bluetooth speaker';
            } else if (guests <= 100) {
                music = 'Professional DJ with sound system';
            } else if (guests <= 1000) {
                music = 'Live band + DJ, professional stage and lighting';
            } else {
                music = 'Multiple stages, headline acts, full festival production';
            }

            // Staffing
            const staff = {
                bartenders: Math.max(1, Math.ceil(guests / 75)),
                servers: Math.ceil(guests / 25),
                security: Math.ceil(guests / 100),
                cleanup: Math.ceil(guests / 50)
            };

            return {
                guests: guests,
                budget: budget,
                budgetPerPerson: budgetPerPerson,
                vibe: vibe,
                theme: selectedTheme,
                dietary: dietary,
                alcohol: alcohol,
                food: food,
                music: music,
                staff: staff
            };
        }

        function displayPlan(plan) {
            let html = `
                <div class="result-section">
                    <h3>📊 Overview</h3>
                    <p><strong>Guests:</strong> ${plan.guests.toLocaleString()}</p>
                    <p><strong>Budget:</strong> $${plan.budget.toLocaleString()} ($${plan.budgetPerPerson}/person)</p>
                    <p><strong>Vibe:</strong> ${plan.vibe.toUpperCase()}</p>
                    <p><strong>Theme:</strong> ${plan.theme.replace('-', ' ').toUpperCase()}</p>
                </div>

                <div class="result-section">
                    <h3>🍕 Food & Catering</h3>
                    <p>${plan.food}</p>
                    ${plan.dietary ? `<p><strong>Dietary Notes:</strong> ${plan.dietary}</p>` : ''}
                </div>

                <div class="result-section">
                    <h3>🍹 Drinks</h3>
                    <p><strong>Bar Type:</strong> ${plan.alcohol.replace('-', ' ').toUpperCase()}</p>
                    <p><strong>Estimated Quantities:</strong> ${Math.ceil(plan.guests * 3)} drinks, ${plan.guests * 2} waters</p>
                </div>

                <div class="result-section">
                    <h3>🎵 Music & Entertainment</h3>
                    <p>${plan.music}</p>
                </div>

                <div class="result-section">
                    <h3>👥 Staffing Needs</h3>
                    <p><strong>Bartenders:</strong> ${plan.staff.bartenders}</p>
                    <p><strong>Servers:</strong> ${plan.staff.servers}</p>
                    <p><strong>Security:</strong> ${plan.staff.security}</p>
                    <p><strong>Cleanup Crew:</strong> ${plan.staff.cleanup}</p>
                </div>
            `;

            document.getElementById('results-content').innerHTML = html;
        }

        function randomizePlan() {
            // Randomize all inputs
            document.getElementById('guests').value = Math.floor(Math.random() * 9999) + 1;
            document.getElementById('budget').value = Math.floor(Math.random() * 99900) + 100;
            document.getElementById('vibe').selectedIndex = Math.floor(Math.random() * 5);
            document.getElementById('alcohol').selectedIndex = Math.floor(Math.random() * 6);
            
            // Update displays
            document.getElementById('guests').oninput();
            document.getElementById('budget').oninput();
            
            // Random theme
            const themes = document.querySelectorAll('.theme-btn');
            themes.forEach(b => b.classList.remove('selected'));
            const randomTheme = themes[Math.floor(Math.random() * themes.length)];
            randomTheme.classList.add('selected');
            selectedTheme = randomTheme.dataset.theme;
            
            // Generate
            generatePlan();
        }

        function panicMode() {
            const guests = parseInt(document.getElementById('guests').value);
            
            let html = `
                <div class="result-section" style="border-color: #FF0000; background: rgba(255,0,0,0.1);">
                    <h3>🚨 PANIC MODE - 5 MINUTE PARTY PLAN!</h3>
                    <p><strong>FOOD (2 min):</strong> Order ${Math.ceil(guests/3)} pizzas NOW! Grab all chips and candy!</p>
                    <p><strong>DRINKS (1 min):</strong> Ice everything! Text everyone to BYOB!</p>
                    <p><strong>MUSIC (30 sec):</strong> Spotify "Today's Top Hits" at MAX volume!</p>
                    <p><strong>SPACE (1 min):</strong> Hide mess in closets! Push furniture to walls!</p>
                    <p><strong>VIBE (30 sec):</strong> Dim lights! Light candles! Text "PARTY NOW!"</p>
                    <p style="margin-top: 20px; font-size: 1.2rem; color: #FFEA00;"><strong>GO TIME! IT'S HAPPENING!</strong></p>
                </div>
            `;
            
            document.getElementById('results-content').innerHTML = html;
            document.getElementById('results').classList.add('show');
        }

        // Test on load
        console.log('When It Happens loaded successfully!');
        console.log('Try clicking Generate Party Plan button');
    </script>
</body>
</html> + val.toLocaleString();
            }
            
            document.getElementById('budget-value').textContent = display;
        };

        // Theme selection
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.onclick = function() {
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedTheme = this.dataset.theme;
            };
        });

        // Main generate function
        function generatePlan() {
            console.log('Generating party plan...');
            
            const guests = parseInt(document.getElementById('guests').value);
            const budget = parseInt(document.getElementById('budget').value);
            const vibe = document.getElementById('vibe').value;
            const dietary = document.getElementById('dietary').value;
            const alcohol = document.getElementById('alcohol').value;

            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('results').classList.remove('show');

            // Simulate processing
            setTimeout(() => {
                const plan = createPlan(guests, budget, vibe, dietary, alcohol);
                displayPlan(plan);
                
                document.getElementById('loading').classList.remove('show');
                document.getElementById('results').classList.add('show');
            }, 1500);
        }

        function createPlan(guests, budget, vibe, dietary, alcohol) {
            const budgetPerPerson = Math.floor(budget / guests);
            
            // Food recommendations based on scale
            let food = '';
            if (guests <= 20) {
                food = 'Artisan cheese boards, charcuterie, gourmet sliders, sushi platters';
            } else if (guests <= 100) {
                food = 'Taco bar, pizza station, BBQ buffet, pasta bar';
            } else if (guests <= 1000) {
                food = '3 food trucks, multiple buffet stations, catering teams';
            } else {
                food = 'Festival food court with 10+ vendors, multiple catering zones';
            }

            // Music setup
            let music = '';
            if (guests <= 20) {
                music = 'Curated Spotify playlist + quality Bluetooth speaker';
            } else if (guests <= 100) {
                music = 'Professional DJ with sound system';
            } else if (guests <= 1000) {
                music = 'Live band + DJ, professional stage and lighting';
            } else {
                music = 'Multiple stages, headline acts, full festival production';
            }

            // Staffing
            const staff = {
                bartenders: Math.max(1, Math.ceil(guests / 75)),
                servers: Math.ceil(guests / 25),
                security: Math.ceil(guests / 100),
                cleanup: Math.ceil(guests / 50)
            };

            return {
                guests: guests,
                budget: budget,
                budgetPerPerson: budgetPerPerson,
                vibe: vibe,
                theme: selectedTheme,
                dietary: dietary,
                alcohol: alcohol,
                food: food,
                music: music,
                staff: staff
            };
        }

        function displayPlan(plan) {
            let html = `
                <div class="result-section">
                    <h3>📊 Overview</h3>
                    <p><strong>Guests:</strong> ${plan.guests.toLocaleString()}</p>
                    <p><strong>Budget:</strong> $${plan.budget.toLocaleString()} ($${plan.budgetPerPerson}/person)</p>
                    <p><strong>Vibe:</strong> ${plan.vibe.toUpperCase()}</p>
                    <p><strong>Theme:</strong> ${plan.theme.replace('-', ' ').toUpperCase()}</p>
                </div>

                <div class="result-section">
                    <h3>🍕 Food & Catering</h3>
                    <p>${plan.food}</p>
                    ${plan.dietary ? `<p><strong>Dietary Notes:</strong> ${plan.dietary}</p>` : ''}
                </div>

                <div class="result-section">
                    <h3>🍹 Drinks</h3>
                    <p><strong>Bar Type:</strong> ${plan.alcohol.replace('-', ' ').toUpperCase()}</p>
                    <p><strong>Estimated Quantities:</strong> ${Math.ceil(plan.guests * 3)} drinks, ${plan.guests * 2} waters</p>
                </div>

                <div class="result-section">
                    <h3>🎵 Music & Entertainment</h3>
                    <p>${plan.music}</p>
                </div>

                <div class="result-section">
                    <h3>👥 Staffing Needs</h3>
                    <p><strong>Bartenders:</strong> ${plan.staff.bartenders}</p>
                    <p><strong>Servers:</strong> ${plan.staff.servers}</p>
                    <p><strong>Security:</strong> ${plan.staff.security}</p>
                    <p><strong>Cleanup Crew:</strong> ${plan.staff.cleanup}</p>
                </div>
            `;

            document.getElementById('results-content').innerHTML = html;
        }

        function randomizePlan() {
            // Randomize all inputs
            document.getElementById('guests').value = Math.floor(Math.random() * 9999) + 1;
            document.getElementById('budget').value = Math.floor(Math.random() * 99900) + 100;
            document.getElementById('vibe').selectedIndex = Math.floor(Math.random() * 5);
            document.getElementById('alcohol').selectedIndex = Math.floor(Math.random() * 6);
            
            // Update displays
            document.getElementById('guests').oninput();
            document.getElementById('budget').oninput();
            
            // Random theme
            const themes = document.querySelectorAll('.theme-btn');
            themes.forEach(b => b.classList.remove('selected'));
            const randomTheme = themes[Math.floor(Math.random() * themes.length)];
            randomTheme.classList.add('selected');
            selectedTheme = randomTheme.dataset.theme;
            
            // Generate
            generatePlan();
        }

        function panicMode() {
            const guests = parseInt(document.getElementById('guests').value);
            
            let html = `
                <div class="result-section" style="border-color: #FF0000; background: rgba(255,0,0,0.1);">
                    <h3>🚨 PANIC MODE - 5 MINUTE PARTY PLAN!</h3>
                    <p><strong>FOOD (2 min):</strong> Order ${Math.ceil(guests/3)} pizzas NOW! Grab all chips and candy!</p>
                    <p><strong>DRINKS (1 min):</strong> Ice everything! Text everyone to BYOB!</p>
                    <p><strong>MUSIC (30 sec):</strong> Spotify "Today's Top Hits" at MAX volume!</p>
                    <p><strong>SPACE (1 min):</strong> Hide mess in closets! Push furniture to walls!</p>
                    <p><strong>VIBE (30 sec):</strong> Dim lights! Light candles! Text "PARTY NOW!"</p>
                    <p style="margin-top: 20px; font-size: 1.2rem; color: #FFEA00;"><strong>GO TIME! IT'S HAPPENING!</strong></p>
                </div>
            `;
            
            document.getElementById('results-content').innerHTML = html;
            document.getElementById('results').classList.add('show');
        }

        // Test on load
        console.log('When It Happens loaded successfully!');
        console.log('Try clicking Generate Party Plan button');
    </script>
</body>
</html>